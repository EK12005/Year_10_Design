<!DOCTYPE html>
<html>
<head>
	<title>Firebase Database Demo</title>

	<!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
            
</head>
<body>

<div class = "container">

		<br/>

		<a class="waves-effect waves-light btn">Once</a>

		<div class = "display">
		
			<p>Once Data Display</p>
		
		</div>
		
		<input placeholder="Input Name" id="name" type="text" class="validate">
		<label for="name">Name</label>
		
		<input placeholder="Input Food" id="food" type="text" class="validate">
		<label for="name">Food</label>
		
		<br/>
		<br/>
		
		<a id = "enter_data" class="waves-effect waves-light btn">Submit</a>
		
		<br/>
		<br/>
		
		<div id = "live">
			<p>Live Update</p>
		</div>

	</div>


	<!-- The core Firebase JS SDK is always required and must be listed first -->
	<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>

	<!-- TODO: Add SDKs for Firebase products that you want to use
	     https://firebase.google.com/docs/web/setup#available-libraries -->
	<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-analytics.js"></script>

	<!-- ADDED: COPY OTHER IMPORT AND CHANGE TO DATABASE !-->
	<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-database.js"></script>

	<!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

	<script>

	  // Your web app's Firebase configuration
	  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
	  var firebaseConfig = {

	    apiKey: "AIzaSyCocbFNd60hcZuomW1_jrzSaT-0NaXMimY",
	    authDomain: "design10-firebasebpm-2a1c5.firebaseapp.com",
	    databaseURL: "https://design10-firebasebpm-2a1c5.firebaseio.com",
	    projectId: "design10-firebasebpm-2a1c5",
	    storageBucket: "design10-firebasebpm-2a1c5.appspot.com",
	    messagingSenderId: "605717327024",
	    appId: "1:605717327024:web:fe62694746b46fc2131f75",
	    measurementId: "G-91TPHZJC99"

	  };
	  // Initialize Firebase
	  firebase.initializeApp(firebaseConfig);
	  firebase.analytics();

	  //THIS GOES OUT AND GETS A REFERENCE TO THE DATABASE
	  var database = firebase.database();


	  //WRITING DATA
	  function writeUserData(userId, name, food) {

	  	data = {

	  		name: name,
    		food: food,

	  	}

  		database.ref('users/' + userId).set(data);

  	  }

  	console.log("test")
  	writeUserData("03","Edwin","Spaghetti")
  	writeUserData("04","Noah","Har Gow")

  	//ON COMMAND
  	var userUpdate = database.ref('users/');

  	//event --> value - reserved word that means when something changes.
  	function onChange(snapshot) {

  		const data = snapshot.val();
  		//console.log(data["01"]);

  		//If I can writea loop I can access each one

  		for (key in data) {
  			console.log(data[key])
  			//Build some HTML elements and put that on your page.
  		}

  	}

  	userUpdate.on('value',onChange);

	</script>

</body>
</html>